!function(t){"use strict";t.fn.smoothState=function(e){function n(t,r){w.hasOwnProperty(t)?null===w[t]?setTimeout(function(){y.addClass(e.loadingBodyClass),n(t,r)},10):"error"===w[t]?window.location=t:(y.removeClass(e.loadingBodyClass),e.onBefore(t,r),a(t,r)):(o(t),n(t,r))}function o(n){if(!w.hasOwnProperty(n)){w[n]=null;var o=e.alterRequestUrl(n),a=t.ajax(o);a.success(function(o){w=r(w,e.pageCacheSize),w[n]={title:t(o).filter("title").text(),html:o}}),a.error(function(){w[n]="error"})}}function r(t,e){return Object.keys||(Object.keys=function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),Object.keys(t).length>e&&(t={}),t}function a(t,n){var o=n.prop("id"),r=h(w[t].html),a=o.length?r.find("#"+o).html():"";o.length&&a.length?(i(a,n),l(w[t].title,t,o)):e.development&&O?o.length?a.length||O.warn("No element with an ID of '#"+o+"' in response from "+t):O.warn("The following container has no ID: ",n[0]):window.location=t}function i(t,n){var o,r;for(o=0;o<e.renderFrame.length;o+=1)r=o===e.renderFrame.length-1,c(o,t,n,r)}function l(t,e,n){document.title=t,g?g=!1:(history.pushState({id:n},t,e),v=!0)}function c(t,n,o,r){var a=e.frameDelay*t;setTimeout(function(){var a=e.renderFrame[t](n,o);o.html(a),r&&e.onAfter(n,o)},a)}function s(t){var e=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof e[1]&&e[1].length>0&&e[1].toLowerCase()!==location.protocol?!0:"string"==typeof e[2]&&e[2].length>0&&e[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host?!0:!1}function u(t){var e=t.indexOf(window.location.pathname)>0?!0:!1,n=t.indexOf("#")>0?!0:!1;return e&&n?!0:!1}function f(t){var n=t.prop("href");return!s(n)&&!u(n)&&!t.is(e.blacklist)}function h(e){var n,o=t(),r=e.replace(C,function(e,n,r,a){var i={};return n||(o=o.add("<"+r+"/>"),a&&t.each(t("<div"+a+"/>")[0].attributes,function(t,e){i[e.name]=e.value}),o.eq(-1).attr(i)),"<"+n+"div"+(n?"":' id="'+T+(o.length-1)+'"')+">"});return o.length?(n||(n=t("<div/>")),n.html(r),t.each(o,function(t){var e=n.find("#"+T+t).before(o[t]);o.eq(t).html(e.contents()),e.remove()}),n.children().unwrap()):t(e)}function d(e){e.stopPropagation();var n=t(e.currentTarget),r=n.prop("href");f(n)&&o(r)}function p(e){e.stopPropagation();var o=t(e.currentTarget),r=o.prop("href"),a=t(e.delegateTarget);f(o)&&(e.preventDefault(),n(r,a))}function m(){var e=window.location.href;!u(e)&&history.state?(g=!0,n(e,t("#"+history.state.id))):null===history.state&&v&&(window.location=e)}var g=!1,v=!1,w={},y=t("body"),b=t(window),O=window.console||!1,C=/<(\/?)(html|head|body|title|base|meta)(\s+[^>]*)?>/gi,T="ss"+Math.round(100*Math.random()*100);return e=t.extend({prefetch:!1,blacklist:".no-smoothstate, [rel='nofollow'], [target]",loadingBodyClass:"loading-cursor",development:!1,pageCacheSize:5,frameDelay:400,renderFrame:[function(e){return t("<div/>").append(e).html()}],alterRequestUrl:function(t){return t},onAfter:function(){},onBefore:function(){b.scrollTop(0)}},e),window.onpopstate=m,this.each(function(){var n=t(this);n.on("click","a",p),e.prefetch&&n.on("mouseover touchstart","a",d)})}}(jQuery);